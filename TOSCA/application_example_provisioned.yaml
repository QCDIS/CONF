tosca_definitions_version: "tosca_simple_yaml_1_0"
topology_template:
  node_templates:
    compute:
      properties:
        disk_size: "10000 MB"
        mem_size: "1000 MB"
        num_cores: 1.0
        os: "Ubuntu 18.04"
        user_name: "vm_user"
      interfaces:
        Standard:
          create: "dumy.yaml"
      type: "tosca.nodes.ARTICONF.VM.Compute"
      attributes:
        user_key_pair:
          protocol: "ssh"
          keys:
            public_key: "c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFBZ1FDRm9tbkNaR2JYaGthdFkrV2VLQ29yRzdSRUlYSTBhclNLb2VrVU13Wks3c1NjNTloTFN3a09TcGZiTExuNnlGWG1Tc1h3bkk5SmJvY1lCdUR2bllJdVVrdnY5bmtQWVc3S0RXdU01UU5oanlhQUtkVUlXeGhZZ3pka2JJYkVUNlo2QkgvZGxzV2NsSU9aMnNSeGFidkNPQVVsT0xNWDFMQUlFK1ZacDlpekl3PT0gZ2VuZXJhdGVkIHVzZXIgYWNjZWVzIGtleXMK"
            private_key: "LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlDV3dJQkFBS0JnUUNGb21uQ1pHYlhoa2F0WStXZUtDb3JHN1JFSVhJMGFyU0tvZWtVTXdaSzdzU2M1OWhMClN3a09TcGZiTExuNnlGWG1Tc1h3bkk5SmJvY1lCdUR2bllJdVVrdnY5bmtQWVc3S0RXdU01UU5oanlhQUtkVUkKV3hoWWd6ZGtiSWJFVDZaNkJIL2Rsc1djbElPWjJzUnhhYnZDT0FVbE9MTVgxTEFJRStWWnA5aXpJd0lEQVFBQgpBb0dBWStWZ1IrZkVGVE1VWElPRDM3SElyQWIrdjd0ODR3QXRURUR5dXAzV0EyZnY1QmRRVWlDYWVXdDdqMlVrCjlmcVNkQi9MVGkzSzB5cmpwQ3RvTk5jNnU0dHpkV0txRk9QRUgyNXhHQ1N6aVpNQWFWcWdFTTNDb0UrVUl1aXIKNW1FaGlQRDJhd2U2SFdZbUQvODQwTUxWR1NUMWp3VUdxTy9wY0dpQW04c0hBeGtDUVFEYW45S1JZL2RiQmNUegpLR3JUL25Xamg2WW0ySnAxNkd5NEMxeDVEZElUYVg5TEtsajIwS2V4ZFQ5NGVNN2o5S1pBZG9uS2xzQ1l1WVBRClRRMGd6U2hQQWtFQW5IcjV2YkFhbWh1Rkw1Uk9zQXF4dWhxdXRVcTRUbnVraHlPNFZQYnoxRE12djgwZzd0V1MKWnNtSWV6ek14YXpncXhiaHV2S0lPWjFoRjROUDNsVCs3UUpBZWRPbDJ5OEJuODlQT05ERTl1MU5VSnMrazFjUQplN1BSSVozekllSDV0cWVMTDYraGM2aENTamt6N1VZa3hCS0lzbE5iNVhDc1VtN09iVDBDbTh5M01RSkFlMzlHCjJTRkNiWHZveWx0SEd3TGxyNVpkYWpGVmNvTjhuemRleEplK2Fpd1h0RTFsZjNsSk9SdzNQZVFIVEwrYTlReHoKRE1OYkpmV0NhamMxY3Fnc0pRSkFkNmhoekxVTmFtYVVycTdoNkdMTUZ4TFdOdDJleGhWZWhZU3IyeTBZZ2RXZwpaUTc1eTV2Rm9zMXFTTDl6dU83cVpKRmpqc2doVVhvRGtVbFNYWk9DMlE9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo="
        public_ip: "52.59.190.147"
        role: "master"
        node_type: "t2.micro"
        root_key_pair:
          protocol: "ssh"
          keys:
            public_key: "cHVibGljS2V5LTMyMGQwOWM5LWZiY2EtNDFiMy04OGU0LTFjYzVjMmFmNDY1OQ=="
            private_key: "LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBaHB6MTcyRjhLbUNLSFFGVWVnTFgrVGp5WHhYa1pBdTVvVS9lVFNHRnZTdWllOWd4N2RLVFpLUi9MV05qCno5WXlEZzd0NU5pNFA3dUo3WDNKL204MWozdXVFRkJPQkt4aGlleUFRN3d3RTdCK1hXZFlZZ1grOVJYRUphYmxRQ0laVnRTQ1pPY3AKamUrMFFmaTcwU2UxaU90cEg0ZDNscnNRTVh3UlBXU1FmQmtkM005V3hjWi9MNzFsaTE5cnVLckpOS09VS0Z1QTZzNE5zQ3YxNkVWSQpQTkl4TkFXTGh1T3FGL29ocHR6T1JOaE83T0ptWWUvOXFXdHp3Lzl1SG1iRnhhRktOWUlONDZaS05YUnpnbllxMWYzK2RSUVJSSzdVClVUREpweXJLcXZkV3pxaGQxQTk2ekp2NFNZMi9PK2JrYm5mM1ZhMk0rTEhPY3VDTWJOY3ZTd0lEQVFBQkFvSUJBSDdLR0ZzQVZ4TVQKR3dOMjNUcU9zeDNxcFY4cUg1U2I5cHdadmlpb0NtL0RTYWVjV21yR2pFMmZJcXA5a3VXUHVsWERlZzZ5a2RoMXE5UWxScngvd3RNQwppMUNTVXVuVDg0c1ZWenAxWmxNbFNlQndGcTg5Tm9kaG1QNWQxRkF6emVvYS96WkxCTGpMcmR6MWl2SFZsUWNCdEdJZUZtWENpOTRRCkhhelZxOEUxL2w4c3VCa3JNSzlybHZHVUtZck8wSEZBZFgyVDZtb292TTFPTFdWQkZ5ZEUrTXN4NWxaNGtML3JpNWsvQmR2QUNkLzYKLy9oT1FFSHhCdFR6SWtPUjZxZEtJMmo4UUkrc0FVMytwek1EMXhraUpqaE9KeERWamtTdUJGdVRDeit4SjE4T0VKanR2bE5Ia3E0KwpCZG1EQVpnRDNXMndpV0dmVkI5dnpTZUpvQUVDZ1lFQTdsSFNtK0ZVcXlyQnZNNFFRVmxtdzRZS0I5U3hGMGM5SkFSSUZLT1I0NGJZClBGVEhheTJkUHhRZHlkYUtWN0JSYjd1ZTZZV0p2d0hKUWZEbXhGR2tEK1FWTTd3ZDJVTWNOaW1kaHgyM096aG1GT0VQUmZoN0pZejUKRnFzbSs0bm5oUU9lMTNjUGs2MDhUU25rTGtiZDI4VGhBUHN4YVVzemhJWTYwWGFhOUlFQ2dZRUFrSm1LR28yQlVJWmtWNGd0dmhXQwpqSVF4MzJtR0pqckhCN1NhZ3pwc0FuaElING03ZHoxcEJwVjExNWhHSC9FQWkzT1pXaVNyQlIrcVl1Y3BKK29Cam41MVdZdjQ3MjlpClU4WEVwM0Z3dWlWQWwxSDZEQkNnNkdNV25kZnovUGd6bjB1dG42NmZ1VE5CaEszK0JSMVh3SHo1NEVBbWNlYnIwVzErWlVRc3pjc0MKZ1lFQTJwdExxWmxrWlM1dlVKVms2OHpxS3VoRlF6R2kwRXVVbGZrbmRXY2xaNlJGcmZIR2kxWG9LL2h6NnJWVmFXSmZFVEwxYmhnRQpacVZveTRnQzVvcE5DQmFjTER5ZTFMQnVySEE0QTcwS1d0UTlMMkhTOU1nZGpqQm1QSmo2eFRtV21iamNkNkRMTlJkdmZRaTBPbzdlCjY3MEkrREZ5L2JieHB0cktFV0hPZWdFQ2dZQmM3a0NDbGlUZ29xNkVUdUhQQXpYMnB0TUNtV2Y4MDlPc0VSY29kWGlMRWRDUWJFMU4KOGVxNHIzK2Z3cDUyMHNXZDJmcFpvNjFCeXJzUGV5N0pGeXhPN3RqdVp2WGlzN3dHeU5oOUlIdnBOaDNQNG9DSUZudkRQa04veUJWbgpwQUJSUlNyZHNEVzRxY2RXeFJlM0k4ZU16d1VzYVM0TUQvUElrYzBrdWU3dGh3S0JnUUNuUjh2NHM0bWVQeEF1MGRiVmxaR3ExUnZnCkJnR3BkZHR6SnN2Sk9qYitmWVp3a2tNU3huZGY5dzdocUVqbEFPckdNVmlBTm13R3ROVWFSMEdkS1h1OGxoRzNSUDFEbnFRdkR0ZDMKajRRTkE0WUFjZ2xFYnpLK1JsVzR1VENOeTN6enBqcC8wOERBazJOZHMvVkhkQ0gyRlBBaW9TdVkrTllESFJhTlE0Tng4QT09Ci0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0t"
        host_name: "vm0"
    compute_1:
      properties:
        disk_size: "10000 MB"
        mem_size: "1000 MB"
        num_cores: 1.0
        os: "Ubuntu 18.04"
        user_name: "vm_user"
      interfaces:
        Standard:
          create: "dumy.yaml"
      type: "tosca.nodes.ARTICONF.VM.Compute"
      attributes:
        user_key_pair:
          protocol: "ssh"
          keys:
            public_key: "c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFBZ1FDRm9tbkNaR2JYaGthdFkrV2VLQ29yRzdSRUlYSTBhclNLb2VrVU13Wks3c1NjNTloTFN3a09TcGZiTExuNnlGWG1Tc1h3bkk5SmJvY1lCdUR2bllJdVVrdnY5bmtQWVc3S0RXdU01UU5oanlhQUtkVUlXeGhZZ3pka2JJYkVUNlo2QkgvZGxzV2NsSU9aMnNSeGFidkNPQVVsT0xNWDFMQUlFK1ZacDlpekl3PT0gZ2VuZXJhdGVkIHVzZXIgYWNjZWVzIGtleXMK"
            private_key: "LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlDV3dJQkFBS0JnUUNGb21uQ1pHYlhoa2F0WStXZUtDb3JHN1JFSVhJMGFyU0tvZWtVTXdaSzdzU2M1OWhMClN3a09TcGZiTExuNnlGWG1Tc1h3bkk5SmJvY1lCdUR2bllJdVVrdnY5bmtQWVc3S0RXdU01UU5oanlhQUtkVUkKV3hoWWd6ZGtiSWJFVDZaNkJIL2Rsc1djbElPWjJzUnhhYnZDT0FVbE9MTVgxTEFJRStWWnA5aXpJd0lEQVFBQgpBb0dBWStWZ1IrZkVGVE1VWElPRDM3SElyQWIrdjd0ODR3QXRURUR5dXAzV0EyZnY1QmRRVWlDYWVXdDdqMlVrCjlmcVNkQi9MVGkzSzB5cmpwQ3RvTk5jNnU0dHpkV0txRk9QRUgyNXhHQ1N6aVpNQWFWcWdFTTNDb0UrVUl1aXIKNW1FaGlQRDJhd2U2SFdZbUQvODQwTUxWR1NUMWp3VUdxTy9wY0dpQW04c0hBeGtDUVFEYW45S1JZL2RiQmNUegpLR3JUL25Xamg2WW0ySnAxNkd5NEMxeDVEZElUYVg5TEtsajIwS2V4ZFQ5NGVNN2o5S1pBZG9uS2xzQ1l1WVBRClRRMGd6U2hQQWtFQW5IcjV2YkFhbWh1Rkw1Uk9zQXF4dWhxdXRVcTRUbnVraHlPNFZQYnoxRE12djgwZzd0V1MKWnNtSWV6ek14YXpncXhiaHV2S0lPWjFoRjROUDNsVCs3UUpBZWRPbDJ5OEJuODlQT05ERTl1MU5VSnMrazFjUQplN1BSSVozekllSDV0cWVMTDYraGM2aENTamt6N1VZa3hCS0lzbE5iNVhDc1VtN09iVDBDbTh5M01RSkFlMzlHCjJTRkNiWHZveWx0SEd3TGxyNVpkYWpGVmNvTjhuemRleEplK2Fpd1h0RTFsZjNsSk9SdzNQZVFIVEwrYTlReHoKRE1OYkpmV0NhamMxY3Fnc0pRSkFkNmhoekxVTmFtYVVycTdoNkdMTUZ4TFdOdDJleGhWZWhZU3IyeTBZZ2RXZwpaUTc1eTV2Rm9zMXFTTDl6dU83cVpKRmpqc2doVVhvRGtVbFNYWk9DMlE9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo="
        public_ip: "3.127.81.250"
        role: "worker"
        node_type: "t2.micro"
        root_key_pair:
          protocol: "ssh"
          keys:
            public_key: "cHVibGljS2V5LTMyMGQwOWM5LWZiY2EtNDFiMy04OGU0LTFjYzVjMmFmNDY1OQ=="
            private_key: "LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBaHB6MTcyRjhLbUNLSFFGVWVnTFgrVGp5WHhYa1pBdTVvVS9lVFNHRnZTdWllOWd4N2RLVFpLUi9MV05qCno5WXlEZzd0NU5pNFA3dUo3WDNKL204MWozdXVFRkJPQkt4aGlleUFRN3d3RTdCK1hXZFlZZ1grOVJYRUphYmxRQ0laVnRTQ1pPY3AKamUrMFFmaTcwU2UxaU90cEg0ZDNscnNRTVh3UlBXU1FmQmtkM005V3hjWi9MNzFsaTE5cnVLckpOS09VS0Z1QTZzNE5zQ3YxNkVWSQpQTkl4TkFXTGh1T3FGL29ocHR6T1JOaE83T0ptWWUvOXFXdHp3Lzl1SG1iRnhhRktOWUlONDZaS05YUnpnbllxMWYzK2RSUVJSSzdVClVUREpweXJLcXZkV3pxaGQxQTk2ekp2NFNZMi9PK2JrYm5mM1ZhMk0rTEhPY3VDTWJOY3ZTd0lEQVFBQkFvSUJBSDdLR0ZzQVZ4TVQKR3dOMjNUcU9zeDNxcFY4cUg1U2I5cHdadmlpb0NtL0RTYWVjV21yR2pFMmZJcXA5a3VXUHVsWERlZzZ5a2RoMXE5UWxScngvd3RNQwppMUNTVXVuVDg0c1ZWenAxWmxNbFNlQndGcTg5Tm9kaG1QNWQxRkF6emVvYS96WkxCTGpMcmR6MWl2SFZsUWNCdEdJZUZtWENpOTRRCkhhelZxOEUxL2w4c3VCa3JNSzlybHZHVUtZck8wSEZBZFgyVDZtb292TTFPTFdWQkZ5ZEUrTXN4NWxaNGtML3JpNWsvQmR2QUNkLzYKLy9oT1FFSHhCdFR6SWtPUjZxZEtJMmo4UUkrc0FVMytwek1EMXhraUpqaE9KeERWamtTdUJGdVRDeit4SjE4T0VKanR2bE5Ia3E0KwpCZG1EQVpnRDNXMndpV0dmVkI5dnpTZUpvQUVDZ1lFQTdsSFNtK0ZVcXlyQnZNNFFRVmxtdzRZS0I5U3hGMGM5SkFSSUZLT1I0NGJZClBGVEhheTJkUHhRZHlkYUtWN0JSYjd1ZTZZV0p2d0hKUWZEbXhGR2tEK1FWTTd3ZDJVTWNOaW1kaHgyM096aG1GT0VQUmZoN0pZejUKRnFzbSs0bm5oUU9lMTNjUGs2MDhUU25rTGtiZDI4VGhBUHN4YVVzemhJWTYwWGFhOUlFQ2dZRUFrSm1LR28yQlVJWmtWNGd0dmhXQwpqSVF4MzJtR0pqckhCN1NhZ3pwc0FuaElING03ZHoxcEJwVjExNWhHSC9FQWkzT1pXaVNyQlIrcVl1Y3BKK29Cam41MVdZdjQ3MjlpClU4WEVwM0Z3dWlWQWwxSDZEQkNnNkdNV25kZnovUGd6bjB1dG42NmZ1VE5CaEszK0JSMVh3SHo1NEVBbWNlYnIwVzErWlVRc3pjc0MKZ1lFQTJwdExxWmxrWlM1dlVKVms2OHpxS3VoRlF6R2kwRXVVbGZrbmRXY2xaNlJGcmZIR2kxWG9LL2h6NnJWVmFXSmZFVEwxYmhnRQpacVZveTRnQzVvcE5DQmFjTER5ZTFMQnVySEE0QTcwS1d0UTlMMkhTOU1nZGpqQm1QSmo2eFRtV21iamNkNkRMTlJkdmZRaTBPbzdlCjY3MEkrREZ5L2JieHB0cktFV0hPZWdFQ2dZQmM3a0NDbGlUZ29xNkVUdUhQQXpYMnB0TUNtV2Y4MDlPc0VSY29kWGlMRWRDUWJFMU4KOGVxNHIzK2Z3cDUyMHNXZDJmcFpvNjFCeXJzUGV5N0pGeXhPN3RqdVp2WGlzN3dHeU5oOUlIdnBOaDNQNG9DSUZudkRQa04veUJWbgpwQUJSUlNyZHNEVzRxY2RXeFJlM0k4ZU16d1VzYVM0TUQvUElrYzBrdWU3dGh3S0JnUUNuUjh2NHM0bWVQeEF1MGRiVmxaR3ExUnZnCkJnR3BkZHR6SnN2Sk9qYitmWVp3a2tNU3huZGY5dzdocUVqbEFPckdNVmlBTm13R3ROVWFSMEdkS1h1OGxoRzNSUDFEbnFRdkR0ZDMKajRRTkE0WUFjZ2xFYnpLK1JsVzR1VENOeTN6enBqcC8wOERBazJOZHMvVkhkQ0gyRlBBaW9TdVkrTllESFJhTlE0Tng4QT09Ci0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0t"
        host_name: "vm1"
    kubernetes:
      requirements:
      - host:
          capability: "tosca.capabilities.ARTICONF.VM.topology"
          node: "topology"
          relationship: "tosca.relationships.HostedOn"
      interfaces:
        Kubernetes:
          configure:
            inputs:
              playbook: "https://raw.githubusercontent.com/skoulouzis/CONF/develop/ansible_playbooks/dashboard.yaml"
          create:
            inputs:
              playbook: "https://raw.githubusercontent.com/skoulouzis/CONF/develop/ansible_playbooks/create_k8s.yml"
          install:
            inputs:
              playbook: "https://raw.githubusercontent.com/skoulouzis/CONF/develop/ansible_playbooks/install_k8s.yml"
      type: "tosca.nodes.ARTICONF.docker.Orchestrator.Kubernetes"
    topology:
      properties:
        domain: "Frankfurt"
        provider: "EC2"
      requirements:
      - vm:
          capability: "tosca.capabilities.ARTICONF.VM"
          node: "compute"
          relationship: "tosca.relationships.DependsOn"
      - vm:
          capability: "tosca.capabilities.ARTICONF.VM"
          node: "compute_1"
          relationship: "tosca.relationships.DependsOn"
      interfaces:
        CloudsStorm:
          delete:
            inputs:
              code_type: "SEQ"
              object_type: "SubTopology"
          hscale:
            inputs:
              code_type: "SEQ"
              object_type: "SubTopology"
          provision:
            inputs:
              code_type: "SEQ"
              object_type: "SubTopology"
          start:
            inputs:
              code_type: "SEQ"
              object_type: "SubTopology"
          stop:
            inputs:
              code_type: "SEQ"
              object_type: "SubTopology"
      type: "tosca.nodes.ARTICONF.VM.topology"
      attributes:
        credential:
          cloud_provider_name: "EC2"
          keys:
            aws_access_key_id: "XXXXXXXXXXXXXXXXXXX"
          token: "XXXXXXXXXXXXXXXXXXX"
          token_type: "access_key"
        desired_state: "PROVISION"
        status: "running"
    ws-pema:
      properties:
        ports:
        - "30001:8080"
      requirements:
      - host:
          capability: "tosca.capabilities.ARTICONF.docker.Orchestrator"
          node: "kubernetes"
          relationship: "tosca.relationships.HostedOn"
      type: "tosca.nodes.ARTICONF.Container.Application.Docker"
      artifacts:
        image:
          file: "alogo53/ws-pema-lifewatch"
          repository: "docker_hub"
          type: "tosca.artifacts.Deployment.Image.Container.Docker"
description: "TOSCA example"
imports:
- nodes: "https://raw.githubusercontent.com/skoulouzis/DRIP/develop/TOSCA/types/nodes.yaml"
- data: "https://raw.githubusercontent.com/skoulouzis/CONF/develop/TOSCA/types/data.yml"
- capabilities: "https://raw.githubusercontent.com/skoulouzis/DRIP/develop/TOSCA/types/capabilities.yaml"
- policies: "https://raw.githubusercontent.com/skoulouzis/DRIP/develop/TOSCA/types/policies.yaml"
- interfaces: "https://raw.githubusercontent.com/skoulouzis/DRIP/develop/TOSCA/types/interfaces.yml"
